<!--
 * @Author: Haaaaai 1306625287@qq.com
 * @Date: 2024-04-17 13:54:02
 * @LastEditors: Haaaaai 1306625287@qq.com
 * @LastEditTime: 2024-04-18 17:54:27
 * @FilePath: \vue3_admin_template\project\src\views\screen\component\center\index.vue
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<template>
  <div class="CenterBody">
    <!-- 地图 -->
    <div class="map">
      <div class="titleBody">平台高峰预警信息(2条)</div>
      <div class="RTcount">
        <span v-for="(item, index) in mapTitle" :key="index">{{ item }}</span>
      </div>
      <div class="mapMain" ref="mapMain"></div>
    </div>
    <!-- 底 -->
    <div class="future">
      <p class="title">未来30日游客量趋势</p>
      <p class="title-bottom"></p>
      <div class="futChart" ref="futChart"></div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref } from "vue";
import * as echarts from "echarts";
//引入地图所需的json数据
import chinaJson from "./chinamap.json";

let mapTitle = ref("景区实时客流量");
let mapMain = ref();
let futChart = ref();
// 注册中国地图
echarts.registerMap("china", chinaJson as any);
onMounted(() => {
  let mycharts = echarts.init(mapMain.value);
  mycharts.setOption({
    //地图组件
    geo: {
      map: "china",
      left: 0,
      top: 0,
      right: 0,
      label: {
        show: true,
        color: "white",
      },
      itemStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          {
            offset: 0, //0%时的颜色 从上往下看 最上面是0%
            color: "rgb(36 ,88 , 192)",
          },
          {
            offset: 1, //100%时的颜色 从上往下看 最上面是0%
            color: "rgb(0, 0, 57)",
          },
        ]),
        borderWidth: 2,
        borderColor: "rgb(41, 119, 172)",
        opacity: 0.86,
        shadowColor: "rgb(29, 73, 127)",
        shadowBlur: 50,
        shadowOffsetX: 16,
        shadowOffsetY: 16,
      },
      emphasis: {
        itemStyle: {
          opacity: 1,
          color: "rgb(41, 119, 172)",
        },

        label: {
          color: "yellow",
          fontWeight: 600,
          fontSize: 20,
        },
      },
    },
    grid: {
      top: 0,
      left: 0,
      right: 0,
    },
    series: [
      {
        type: "lines",
        data: [
          {
            coords: [
              [116.405285, 39.904989],
              [113.280637, 23.125178],
            ],
            // 统一样式设置
            lineStyle: {
              color: "white",
              width: 6,
            },
          },
        ],
        effect: {
          show: true,
          symbol:
            "path://M887.296 504.32l-54.272-34.304-245.76-156.16c3.584-63.488 5.632-105.984 5.632-107.008v-0.512c0-43.008-33.28-121.856-80.384-121.856-47.616 0-80.384 79.36-80.384 121.856v0.512c0 1.024 2.048 43.52 5.632 107.008L189.44 471.552l-51.712 32.768c-6.144 4.608-12.288 13.824-12.288 22.528v79.36c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V501.76c0-22.528 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v13.312c0 7.68 2.048 14.336 5.632 20.48 7.168 11.776 19.968 19.968 34.816 19.968 11.264 0 21.504-4.608 28.672-11.776 6.144-6.144 10.24-14.336 11.776-23.04 0.512-1.536 0.512-3.584 0.512-5.12V454.656c0-22.016 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v50.176c1.024 12.8 2.048 25.6 2.56 38.4 8.192 25.6 31.744 44.544 60.416 44.544 28.16 0 52.224-18.432 60.416-44.032l3.072-38.4V425.472c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v102.912c0 11.264 4.608 21.504 11.776 28.672 7.168 7.168 17.408 11.776 28.672 11.776 19.456 0 35.328-13.824 39.424-31.744 0.512-3.072 1.024-5.632 1.024-8.704v-13.312c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v46.592c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V527.36c-1.024-9.216-7.168-18.432-13.312-23.04z",
          symbolSize: 15,
        },
      },
      {
        type: "lines",
        data: [
          {
            coords: [
              [110.33119, 20.031971],
              [87.617733, 43.792818],
            ],
            // 统一样式设置
            lineStyle: {
              color: "white",
              width: 6,
            },
          },
        ],
        effect: {
          show: true,
          symbol:
            "path://M887.296 504.32l-54.272-34.304-245.76-156.16c3.584-63.488 5.632-105.984 5.632-107.008v-0.512c0-43.008-33.28-121.856-80.384-121.856-47.616 0-80.384 79.36-80.384 121.856v0.512c0 1.024 2.048 43.52 5.632 107.008L189.44 471.552l-51.712 32.768c-6.144 4.608-12.288 13.824-12.288 22.528v79.36c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V501.76c0-22.528 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v13.312c0 7.68 2.048 14.336 5.632 20.48 7.168 11.776 19.968 19.968 34.816 19.968 11.264 0 21.504-4.608 28.672-11.776 6.144-6.144 10.24-14.336 11.776-23.04 0.512-1.536 0.512-3.584 0.512-5.12V454.656c0-22.016 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v50.176c1.024 12.8 2.048 25.6 2.56 38.4 8.192 25.6 31.744 44.544 60.416 44.544 28.16 0 52.224-18.432 60.416-44.032l3.072-38.4V425.472c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v102.912c0 11.264 4.608 21.504 11.776 28.672 7.168 7.168 17.408 11.776 28.672 11.776 19.456 0 35.328-13.824 39.424-31.744 0.512-3.072 1.024-5.632 1.024-8.704v-13.312c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v46.592c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V527.36c-1.024-9.216-7.168-18.432-13.312-23.04z",
          symbolSize: 15,
        },
      },
      {
        type: "lines",
        data: [
          {
            coords: [
              [102.712251, 25.040609],
              [126.642464, 45.756967],
            ],
            // 统一样式设置
            lineStyle: {
              color: "white",
              width: 6,
            },
          },
        ],
        effect: {
          show: true,
          symbol:
            "path://M887.296 504.32l-54.272-34.304-245.76-156.16c3.584-63.488 5.632-105.984 5.632-107.008v-0.512c0-43.008-33.28-121.856-80.384-121.856-47.616 0-80.384 79.36-80.384 121.856v0.512c0 1.024 2.048 43.52 5.632 107.008L189.44 471.552l-51.712 32.768c-6.144 4.608-12.288 13.824-12.288 22.528v79.36c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V501.76c0-22.528 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v13.312c0 7.68 2.048 14.336 5.632 20.48 7.168 11.776 19.968 19.968 34.816 19.968 11.264 0 21.504-4.608 28.672-11.776 6.144-6.144 10.24-14.336 11.776-23.04 0.512-1.536 0.512-3.584 0.512-5.12V454.656c0-22.016 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v50.176c1.024 12.8 2.048 25.6 2.56 38.4 8.192 25.6 31.744 44.544 60.416 44.544 28.16 0 52.224-18.432 60.416-44.032l3.072-38.4V425.472c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v102.912c0 11.264 4.608 21.504 11.776 28.672 7.168 7.168 17.408 11.776 28.672 11.776 19.456 0 35.328-13.824 39.424-31.744 0.512-3.072 1.024-5.632 1.024-8.704v-13.312c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v46.592c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V527.36c-1.024-9.216-7.168-18.432-13.312-23.04z",
          symbolSize: 15,
        },
      },
      {
        type: "lines",
        data: [
          {
            coords: [
              [118.767413, 32.041544],
              [113.280637, 23.125178],
            ],
            // 统一样式设置
            lineStyle: {
              color: "white",
              width: 6,
            },
          },
        ],
        effect: {
          show: true,
          symbol:
            "path://M887.296 504.32l-54.272-34.304-245.76-156.16c3.584-63.488 5.632-105.984 5.632-107.008v-0.512c0-43.008-33.28-121.856-80.384-121.856-47.616 0-80.384 79.36-80.384 121.856v0.512c0 1.024 2.048 43.52 5.632 107.008L189.44 471.552l-51.712 32.768c-6.144 4.608-12.288 13.824-12.288 22.528v79.36c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V501.76c0-22.528 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v13.312c0 7.68 2.048 14.336 5.632 20.48 7.168 11.776 19.968 19.968 34.816 19.968 11.264 0 21.504-4.608 28.672-11.776 6.144-6.144 10.24-14.336 11.776-23.04 0.512-1.536 0.512-3.584 0.512-5.12V454.656c0-22.016 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v50.176c1.024 12.8 2.048 25.6 2.56 38.4 8.192 25.6 31.744 44.544 60.416 44.544 28.16 0 52.224-18.432 60.416-44.032l3.072-38.4V425.472c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v102.912c0 11.264 4.608 21.504 11.776 28.672 7.168 7.168 17.408 11.776 28.672 11.776 19.456 0 35.328-13.824 39.424-31.744 0.512-3.072 1.024-5.632 1.024-8.704v-13.312c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v46.592c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V527.36c-1.024-9.216-7.168-18.432-13.312-23.04z",
          symbolSize: 15,
        },
      },
      {
        type: "lines",
        data: [
          {
            coords: [
              [106.278179, 38.46637],
              [91.132212, 29.660361],
            ],
            // 统一样式设置
            lineStyle: {
              color: "white",
              width: 6,
            },
          },
        ],
        effect: {
          show: true,
          symbol:
            "path://M887.296 504.32l-54.272-34.304-245.76-156.16c3.584-63.488 5.632-105.984 5.632-107.008v-0.512c0-43.008-33.28-121.856-80.384-121.856-47.616 0-80.384 79.36-80.384 121.856v0.512c0 1.024 2.048 43.52 5.632 107.008L189.44 471.552l-51.712 32.768c-6.144 4.608-12.288 13.824-12.288 22.528v79.36c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V501.76c0-22.528 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v13.312c0 7.68 2.048 14.336 5.632 20.48 7.168 11.776 19.968 19.968 34.816 19.968 11.264 0 21.504-4.608 28.672-11.776 6.144-6.144 10.24-14.336 11.776-23.04 0.512-1.536 0.512-3.584 0.512-5.12V454.656c0-22.016 18.432-40.448 40.448-40.448 11.264 0 21.504 4.608 28.672 11.776 7.168 7.168 11.776 17.408 11.776 28.672v50.176c1.024 12.8 2.048 25.6 2.56 38.4 8.192 25.6 31.744 44.544 60.416 44.544 28.16 0 52.224-18.432 60.416-44.032l3.072-38.4V425.472c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v102.912c0 11.264 4.608 21.504 11.776 28.672 7.168 7.168 17.408 11.776 28.672 11.776 19.456 0 35.328-13.824 39.424-31.744 0.512-3.072 1.024-5.632 1.024-8.704v-13.312c0-11.264 4.608-21.504 11.776-28.672 7.168-7.168 17.408-11.776 28.672-11.776 22.016 0 40.448 18.432 40.448 40.448v46.592c0 22.016 17.92 40.448 40.448 40.448h0.512c22.016 0 40.448-17.92 40.448-40.448V527.36c-1.024-9.216-7.168-18.432-13.312-23.04z",
          symbolSize: 15,
        },
      },
    ],
  });
  let futcharts = echarts.init(futChart.value);
  futcharts.setOption({
    grid: {
      show: false,
      top: 10,
      left: 38,
      bottom: 25,
      right: 0,
    },
    xAxis: {
      type: "category",
      boundaryGap: true,
      splitLine: {
        show: false,
      },
      data: ["3/11", "3/16", "3/21", "3/26", "4/01", "4/06", "4.11"],
    },
    yAxis: {
      axisLine: {
        show: true,
      },
      splitLine: {
        show: false,
      },
    },
    series: [
      {
        type: "line",
        data: [33, 56, 80, 28, 60, 52, 88],
        smooth: true,
        areaStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            {
              offset: 0, //0%时的颜色 从上往下看 最上面是0%
              color: "rgb(105, 98, 36)",
            },
            {
              offset: 1, //100%时的颜色 从上往下看 最上面是0%
              color: "transparent",
            },
          ]),
        },
        itemStyle: {
          color: "rgba(105, 98, 36,0.9)",
        },
      },
      {
        type: "line",
        data: [88, 60, 38, 76, 17, 82, 66],
        smooth: true,
        areaStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            {
              offset: 0, //0%时的颜色 从上往下看 最上面是0%
              color: "hotpink",
            },
            {
              offset: 1, //100%时的颜色 从上往下看 最上面是0%
              color: "transparent",
            },
          ]),
        },
        itemStyle: {
          color: "rgba(255, 75, 122,0.5)",
        },
      },
      {
        type: "line",
        data: [17, 26, 33, 50, 68, 53, 55],
        smooth: true,
        areaStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            {
              offset: 0, //0%时的颜色 从上往下看 最上面是0%
              color: "rgb(0, 122, 254)",
            },
            {
              offset: 1, //100%时的颜色 从上往下看 最上面是0%
              color: "transparent",
            },
          ]),
        },
        itemStyle: {
          color: "rgba(15, 22, 85,0.5)",
        },
      },
    ],
  });
});
</script>

<style scoped lang="scss">
.CenterBody {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  padding-bottom: 30px;
  .map {
    position: relative;
    flex: 2.5;
    width: 100%;
    .titleBody {
      position: absolute;
      width: 80%;
      left: 50%;
      top: 5%;
      transform: translate(-50%, 0);
      background: url(../../images/dataScreen-header-warn-bg.png) no-repeat
        center;
      background-size: 100% 100%;
      text-align: center;
      line-height: 48px;
      color: white;
    }
    .RTcount {
      position: absolute;
      width: 28%;
      height: 28px;
      top: 16%;
      padding: 0 20px;
      color: aliceblue;
      background: url(../../images/map-title-bg.png) no-repeat;
      background-size: 100% 100%;
      span {
        margin: 0 5px;
        line-height: 28px;
        font-weight: 600;
      }
    }
    .mapMain {
      position: absolute;
      width: 80%;
      height: 80%;
      top: 10%;
      left: 10%;
    }
  }
  .future {
    position: relative;
    flex: 1;
    width: 100%;
    background: url(../../images/dataScreen-main-cb.png) no-repeat;
    background-size: 100% 100%;
    .title {
      margin: 0;
      font-size: 20px;
      color: white;
    }
    .title-bottom {
      width: 68px;
      height: 7px;
      margin: 5px 0 0 0;
      background: url(../../images/dataScreen-title.png) no-repeat;
    }
    .futChart {
      position: absolute;
      width: 90%;
      height: 66%;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -38%);
    }
  }
}
</style>
